# CardStudio Deployment Flow Diagram

## Overview Flowchart

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DEPLOYMENT PREPARATION                        â”‚
â”‚  âœ“ Supabase Project Created                                     â”‚
â”‚  âœ“ OpenAI API Key Ready                                         â”‚
â”‚  âœ“ Stripe Account Setup                                         â”‚
â”‚  âœ“ Domain Configured (optional)                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  PART 1: ENVIRONMENT SETUP                       â”‚
â”‚  1. Copy .env.example â†’ .env                                    â”‚
â”‚  2. Configure VITE_SUPABASE_URL                                 â”‚
â”‚  3. Configure VITE_SUPABASE_ANON_KEY                            â”‚
â”‚  4. Configure VITE_STRIPE_PUBLISHABLE_KEY                       â”‚
â”‚  5. Configure OpenAI settings                                   â”‚
â”‚  6. Configure business settings                                 â”‚
â”‚  âœ“ Verify all variables set                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              PART 2A: DATABASE DEPLOYMENT                        â”‚
â”‚  Execute in Supabase Dashboard > SQL Editor:                    â”‚
â”‚  1. schema.sql        â† Tables, enums, indexes                  â”‚
â”‚  2. all_stored_procedures.sql  â† All RPC functions              â”‚
â”‚     (generated by ./scripts/combine-storeproc.sh)               â”‚
â”‚  3. policy.sql        â† RLS policies                            â”‚
â”‚  4. triggers.sql      â† Database triggers                       â”‚
â”‚  âœ“ Verify with SQL queries                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            PART 2B: STORAGE BUCKET SETUP                         â”‚
â”‚  Create in Supabase Dashboard > Storage:                        â”‚
â”‚  1. userfiles (public bucket)                                   â”‚
â”‚  âœ“ Bucket is public                                             â”‚
â”‚  âœ“ Storage policies applied (from policy.sql)                   â”‚
â”‚  Note: App creates folders automatically:                       â”‚
â”‚    - {user_id}/card-images/                                     â”‚
â”‚    - {user_id}/content-images/                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          PART 2C: AUTHENTICATION CONFIGURATION                   â”‚
â”‚  Configure in Supabase Dashboard > Authentication:              â”‚
â”‚  1. Set Site URL (https://your-domain.com)                      â”‚
â”‚  2. Add Redirect URLs:                                          â”‚
â”‚     - https://your-domain.com/reset-password                    â”‚
â”‚     - https://your-domain.com/cms/mycards                       â”‚
â”‚  3. Customize email templates                                   â”‚
â”‚  âœ“ Test signup email                                            â”‚
â”‚  âœ“ Test password reset email                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          PART 3A: EDGE FUNCTION SECRETS                          â”‚
â”‚  Option 1: ./scripts/setup-production-secrets.sh                â”‚
â”‚  Option 2: Manual setup:                                        â”‚
â”‚     npx supabase secrets set OPENAI_API_KEY=sk-...              â”‚
â”‚     npx supabase secrets set STRIPE_SECRET_KEY=sk_live_...      â”‚
â”‚     npx supabase secrets set OPENAI_REALTIME_MODEL=gpt-...      â”‚
â”‚     npx supabase secrets set STRIPE_WEBHOOK_SECRET=whsec_...    â”‚
â”‚  âœ“ Verify: npx supabase secrets list                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          PART 3B: EDGE FUNCTIONS DEPLOYMENT                      â”‚
â”‚  Option 1: ./scripts/deploy-edge-functions.sh (all at once)     â”‚
â”‚  Option 2: Deploy individually:                                 â”‚
â”‚     npx supabase functions deploy chat-with-audio               â”‚
â”‚     npx supabase functions deploy chat-with-audio-stream        â”‚
â”‚     npx supabase functions deploy generate-tts-audio            â”‚
â”‚     npx supabase functions deploy openai-realtime-token         â”‚
â”‚     npx supabase functions deploy translate-card-content        â”‚
â”‚     npx supabase functions deploy create-credit-checkout-sessionâ”‚
â”‚     npx supabase functions deploy handle-credit-purchase-successâ”‚
â”‚     npx supabase functions deploy stripe-credit-webhook         â”‚
â”‚  âœ“ Verify: npx supabase functions list                          â”‚
â”‚  âœ“ Check logs for errors                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          PART 3C: STRIPE WEBHOOK SETUP                           â”‚
â”‚  In Stripe Dashboard > Webhooks:                                â”‚
â”‚  1. Create endpoint:                                            â”‚
â”‚     URL: https://project.supabase.co/functions/v1/stripe-...    â”‚
â”‚  2. Select events:                                              â”‚
â”‚     - checkout.session.completed                                â”‚
â”‚     - checkout.session.async_payment_succeeded                  â”‚
â”‚     - checkout.session.async_payment_failed                     â”‚
â”‚     - charge.refunded                                           â”‚
â”‚  3. Copy webhook secret â†’ Update Edge Function secret           â”‚
â”‚  4. Redeploy stripe-credit-webhook                              â”‚
â”‚  âœ“ Test webhook with test event                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              PART 4A: FRONTEND BUILD                             â”‚
â”‚  1. npm run build:production                                    â”‚
â”‚  âœ“ dist/ folder created                                         â”‚
â”‚  âœ“ No build errors                                              â”‚
â”‚  âœ“ npm run type-check passes                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          PART 4B: FRONTEND DEPLOYMENT                            â”‚
â”‚  Option 1: Vercel                                               â”‚
â”‚     vercel --prod                                               â”‚
â”‚  Option 2: Netlify                                              â”‚
â”‚     netlify deploy --prod                                       â”‚
â”‚  Option 3: Firebase Hosting                                     â”‚
â”‚     firebase deploy --only hosting                              â”‚
â”‚  âœ“ Deployed successfully                                        â”‚
â”‚  âœ“ Environment variables set in hosting dashboard               â”‚
â”‚  âœ“ SSL certificate active                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            PART 4C: DOMAIN CONFIGURATION                         â”‚
â”‚  1. Configure DNS records                                       â”‚
â”‚  2. Point domain to hosting provider                            â”‚
â”‚  3. Enable SSL/HTTPS                                            â”‚
â”‚  4. Configure www redirect (optional)                           â”‚
â”‚  âœ“ Domain accessible                                            â”‚
â”‚  âœ“ HTTPS working                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          PART 5: POST-DEPLOYMENT VERIFICATION                    â”‚
â”‚  âœ“ Database verification (SQL queries)                          â”‚
â”‚  âœ“ Authentication flow test                                     â”‚
â”‚  âœ“ Credit system test                                           â”‚
â”‚  âœ“ Card creation test                                           â”‚
â”‚  âœ“ Translation test                                             â”‚
â”‚  âœ“ Batch issuance test                                          â”‚
â”‚  âœ“ Mobile client test                                           â”‚
â”‚  âœ“ Edge Functions test                                          â”‚
â”‚  âœ“ Admin functions test                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            PART 6: MONITORING & MAINTENANCE                      â”‚
â”‚  âœ“ Database monitoring enabled                                  â”‚
â”‚  âœ“ Edge Function logs reviewed                                  â”‚
â”‚  âœ“ Error tracking configured (optional)                         â”‚
â”‚  âœ“ Backup strategy documented                                   â”‚
â”‚  âœ“ Update procedures documented                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ğŸ‰ LAUNCH READY! ğŸ‰                         â”‚
â”‚  âœ“ All systems operational                                      â”‚
â”‚  âœ“ All tests passing                                            â”‚
â”‚  âœ“ Monitoring active                                            â”‚
â”‚  âœ“ Team trained                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Critical Dependencies

```
Environment Variables
        â†“
Database Schema
        â†“
Stored Procedures  â†â”€â”€â”€â”€â”€â”
        â†“                â”‚
RLS Policies             â”‚
        â†“                â”‚
Database Triggers        â”‚
        â†“                â”‚
Storage Buckets          â”‚
        â†“                â”‚
Auth Configuration       â”‚
        â†“                â”‚
Edge Function Secrets    â”‚
        â†“                â”‚
Edge Functions â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
Stripe Webhook
        â†“
Frontend Build
        â†“
Frontend Deployment
```

## Parallel Tasks (Can Be Done Simultaneously)

After database is set up, these can run in parallel:

```
Database â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â†’ Storage Buckets
                 â”œâ”€â”€â”€â”€â†’ Auth Configuration
                 â””â”€â”€â”€â”€â†’ Edge Function Secrets

Edge Function Secrets â”€â”€â”€â”€â†’ Edge Functions Deployment

Edge Functions Deployed â”€â”€â”€â†’ Stripe Webhook Setup

Frontend â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â†’ Build
                 â””â”€â”€â”€â”€â†’ Deployment
```

## Update Flow (Existing Deployment)

### Database Update
```
Edit sql/storeproc/client-side/*.sql or server-side/*.sql
        â†“
./scripts/combine-storeproc.sh
        â†“
Copy sql/all_stored_procedures.sql
        â†“
Paste in Supabase Dashboard > SQL Editor
        â†“
Execute
        â†“
Verify functions updated
```

### Edge Function Update
```
Edit supabase/functions/<function-name>/index.ts
        â†“
Test locally: npx supabase functions serve <function-name>
        â†“
Deploy: npx supabase functions deploy <function-name>
        â†“
Check logs: npx supabase functions logs <function-name>
        â†“
Verify functionality
```

### Frontend Update
```
Edit Vue components/stores
        â†“
Test locally: npm run dev:local
        â†“
Build: npm run build:production
        â†“
Deploy to hosting provider
        â†“
Clear CDN cache (if applicable)
        â†“
Verify on production
```

## Common Pitfall Prevention

### âŒ Don't Do This:
```
Deploy Edge Functions BEFORE setting secrets
        â†“
    Functions fail with API errors
```

### âœ… Do This Instead:
```
Set Edge Function secrets FIRST
        â†“
THEN deploy Edge Functions
        â†“
Functions work correctly
```

---

### âŒ Don't Do This:
```
Forget to whitelist /reset-password URL
        â†“
Password reset emails redirect to 404
```

### âœ… Do This Instead:
```
Add /reset-password to Supabase Auth redirect URLs
        â†“
Password reset works correctly
```

---

### âŒ Don't Do This:
```
Deploy schema.sql after stored procedures
        â†“
Functions reference non-existent tables
```

### âœ… Do This Instead:
```
Deploy in order: schema â†’ procedures â†’ policies â†’ triggers
        â†“
Everything works correctly
```

---

## Time Estimates

| Part | Task | Estimated Time |
|------|------|----------------|
| Part 1 | Environment Variables | 15 minutes |
| Part 2A | Database Deployment | 10 minutes |
| Part 2B | Storage Buckets | 5 minutes |
| Part 2C | Auth Configuration | 10 minutes |
| Part 3A | Edge Function Secrets | 10 minutes |
| Part 3B | Edge Functions Deploy | 15 minutes |
| Part 3C | Stripe Webhook | 10 minutes |
| Part 4A | Frontend Build | 5 minutes |
| Part 4B | Frontend Deploy | 10 minutes |
| Part 4C | Domain Config | 30 minutes |
| Part 5 | Verification | 45 minutes |
| Part 6 | Monitoring Setup | 20 minutes |
| **TOTAL** | **First-Time Deployment** | **~3 hours** |

**Subsequent deployments**: 30-60 minutes (depending on what changed)

## Quick Reference Commands

```bash
# Complete deployment from scratch
./scripts/combine-storeproc.sh                    # Generate procedures
./scripts/setup-production-secrets.sh             # Setup secrets
./scripts/deploy-edge-functions.sh                # Deploy functions
npm run build:production                          # Build frontend
vercel --prod                                     # Deploy (example)

# Update procedures only
./scripts/combine-storeproc.sh
# Then execute sql/all_stored_procedures.sql in Supabase

# Update Edge Functions only
npx supabase functions deploy <function-name>

# Update frontend only
npm run build:production
# Then deploy to hosting provider
```

---

**Reference**: See `DEPLOYMENT_COMPLETE_GUIDE.md` for detailed instructions for each step.

