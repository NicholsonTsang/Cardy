# OpenAI API Configuration (for other features)
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_TEXT_MODEL=gpt-4o-mini
OPENAI_TTS_MODEL=tts-1
OPENAI_TTS_VOICE=alloy
OPENAI_AUDIO_FORMAT=wav
OPENAI_MAX_TOKENS=3500
OPENAI_REALTIME_MODEL=gpt-realtime-mini-2025-10-06

# Google Gemini API Configuration (for translations)
# Using service account for OAuth2 authentication
GOOGLE_APPLICATION_CREDENTIALS=gemini-service-account.json
GEMINI_TRANSLATION_MODEL=gemini-2.5-flash-lite
GEMINI_TRANSLATION_MAX_TOKENS=30000
GEMINI_TRANSLATION_TEMPERATURE=0.3

# Supabase Configuration (required for API routes)
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key_here

# Stripe Configuration (required for payments and webhooks)
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key_here
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here
# Subscription Price IDs (create in Stripe Dashboard)
# Starter: $40/month recurring subscription
STRIPE_STARTER_PRICE_ID=price_your_starter_price_id_here
# Premium: $280/month recurring subscription
STRIPE_PREMIUM_PRICE_ID=price_your_premium_price_id_here
# Credit top-up price (for overage)
STRIPE_CREDIT_PRICE_ID=price_your_credit_price_id_here

# Server Configuration
PORT=8080
NODE_ENV=development

# =================================================================
# DEBUG / LOGGING CONFIGURATION
# =================================================================
# Enable detailed request logging (method, path, status, duration)
# Default: false (only logs non-health requests with basic info)
DEBUG_REQUESTS=false

# Enable authentication debug logging
# Default: false (logs each authenticated user)
DEBUG_AUTH=false

# Enable usage tracking debug logging
# Default: false (logs each access check with tier, limit, usage)
DEBUG_USAGE=false

# CORS Configuration
# Comma-separated list of allowed origins
# Use '*' to allow all origins (useful for development/testing)
# Examples:
#   - All origins (development): ALLOWED_ORIGINS=*
#   - Single origin: ALLOWED_ORIGINS=https://your-app.com
#   - Multiple origins: ALLOWED_ORIGINS=https://your-app.com,https://admin.your-app.com
#
# ⚠️  Security Note:
# - Development: Use '*' for easy testing
# - Production: Specify exact origins for security
ALLOWED_ORIGINS=*

# Rate Limiting (fallback for non-Redis rate limiting)
# Window in milliseconds (default: 900000 = 15 minutes)
# Max requests per IP per window (default: 100)
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Upstash Redis Configuration (for rate limiting and caching)
# Get your credentials at https://console.upstash.com/
UPSTASH_REDIS_REST_URL=https://your-redis-instance.upstash.io
UPSTASH_REDIS_REST_TOKEN=your_upstash_redis_token_here

# Cache Configuration
# Card content cache TTL in seconds (default: 300 = 5 minutes)
CACHE_CARD_CONTENT_TTL=300
# Scan deduplication window in seconds (default: 300 = 5 minutes)
SCAN_DEDUP_WINDOW_SECONDS=300

# Stripe API Version
STRIPE_API_VERSION=2025-08-27.basil

# =================================================================
# SUBSCRIPTION BUSINESS PARAMETERS (Three-Tier Pricing Model)
# =================================================================
# Free Tier (default)
FREE_TIER_EXPERIENCE_LIMIT=3
FREE_TIER_MONTHLY_SESSION_LIMIT=50

# Starter Tier ($40/month)
STARTER_EXPERIENCE_LIMIT=5
STARTER_MONTHLY_FEE_USD=40
STARTER_MONTHLY_BUDGET_USD=40
STARTER_AI_ENABLED_SESSION_COST_USD=0.05
STARTER_AI_DISABLED_SESSION_COST_USD=0.025
STARTER_MAX_LANGUAGES=2

# Premium Tier ($280/month)
PREMIUM_EXPERIENCE_LIMIT=35
PREMIUM_MONTHLY_FEE_USD=280
PREMIUM_MONTHLY_BUDGET_USD=280
PREMIUM_AI_ENABLED_SESSION_COST_USD=0.04
PREMIUM_AI_DISABLED_SESSION_COST_USD=0.02

# Overage batch pricing (Starter & Premium users)
# Auto top-up: $5 credits
OVERAGE_CREDITS_PER_BATCH=5

# Session tracking configuration
# Session expiration time (default: 30 minutes = 1800 seconds)
SESSION_EXPIRATION_SECONDS=1800
# Redis key TTL for session data (default: 35 days)
SESSION_REDIS_TTL_SECONDS=3024000
# Deduplication window for same visitor (default: 5 minutes = 300 seconds)
SESSION_DEDUP_WINDOW_SECONDS=300
